"use strict";const e=require("../../common/vendor.js"),t=require("../../api/index.js"),i={data:()=>({museums:{},currentPage:1,pageSize:10,loading:!1}),onLoad(){this.loadMuseums()},methods:{async loadMuseums(){try{this.loading=!0;const e=await t.venueApi.getVenueList(),i={};e.data.items.forEach((e=>{i[e.type]||(i[e.type]=[]),i[e.type].push(e)})),this.museums=i}catch(e){console.error("加载展馆列表失败:",e)}finally{this.loading=!1}},async handleMuseumClick(i){e.index.vibrateShort();try{await t.statisticsApi.submitVisit({venueId:i.id,userId:"wx_123456",visitTime:(new Date).toISOString()})}catch(s){console.error("提交访问统计失败:",s)}e.index.navigateTo({url:`/pages/museum-detail/museum-detail?id=${i.id}`})},getCategoryTitle:e=>e||"其他"}};const s=e._export_sfc(i,[["render",function(t,i,s,a,n,r){return{a:e.f(n.museums,((t,i,s)=>({a:e.t(r.getCategoryTitle(i)),b:e.f(t,((t,i,s)=>({a:t.image,b:e.t(t.name),c:e.t(t.description),d:t.id,e:e.o((e=>r.handleMuseumClick(t)),t.id)}))),c:i})))}}]]);wx.createPage(s);
